generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

enum TransactionDirection {
  IN
  OUT
}

model Politician {
  id           Int           @id @default(autoincrement())
  slug         String        @unique
  name         String
  createdAt    DateTime      @default(now())
  updatedAt    DateTime      @updatedAt
  transactions Transaction[]
}

model Transaction {
  id              Int                   @id @default(autoincrement())
  politicianId    Int
  politician      Politician            @relation(fields: [politicianId], references: [id], onDelete: Cascade)
  date            DateTime
  value           Int
  direction       TransactionDirection
  method          String?
  category        String?
  category1       String?
  category2       String?
  counterparty    String?
  inflowType      String?
  source          String?
  createdAt       DateTime              @default(now())
  updatedAt       DateTime              @updatedAt

  @@index([politicianId, direction])
  @@index([date])
}



model MfTransaction {
  id                 Int                     @id @default(autoincrement())
  transactionNo      Int                     @unique
  date               DateTime

  debitAccount       String?
  debitSubaccount    String?
  debitDepartment    String?
  debitCounterparty  String?
  debitTaxCategory   String?
  debitInvoice       String?
  debitAmountYen     Int?

  creditAccount      String?
  creditSubaccount   String?
  creditDepartment   String?
  creditCounterparty String?
  creditTaxCategory  String?
  creditInvoice      String?
  creditAmountYen    Int?

  summary            String?
  tags               String?
  memo               String?
  note1              String?
  note2              String?
  note3              String?
  summaryDetail      String?

  direction          TransactionDirection

  createdAt          DateTime                @default(now())
  updatedAt          DateTime                @updatedAt

  @@index([date])
  @@index([direction])
  @@map("mf_transactions")
}
